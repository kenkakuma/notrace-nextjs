# 管理者ダッシュボード利用ガイド

> 最終更新: 2025-01-15
> バージョン: v0.4.0

## 📋 目次

- [概要](#概要)
- [アクセス方法](#アクセス方法)
- [機能説明](#機能説明)
- [使用方法](#使用方法)
- [セキュリティ](#セキュリティ)
- [トラブルシューティング](#トラブルシューティング)

---

## 概要

### 管理者ダッシュボードとは

NO TRACE EXPLORER の管理者ダッシュボードは、ウェブサイトのコンテンツ、画像、設定を**一元管理**できる統合管理画面です。

### 主要機能

1. **CMS管理** - 企業文章とニュースの作成・編集
2. **画像管理** - Cloudinary画像ライブラリの管理
3. **Hero管理** - トップページHeroセクションの編集

### 特徴

- ✅ **統合管理**: すべての管理機能を1つのダッシュボードに集約
- ✅ **直感的UI**: タブベースのインターフェースで簡単操作
- ✅ **リアルタイムプレビュー**: 変更内容を即座に確認
- ✅ **レスポンシブ対応**: PCでもタブレットでも使用可能

---

## アクセス方法

### 開発環境

```
http://localhost:3000/admin
```

### 本番環境

```
https://no-trace.jp/admin
```

### 認証

**現在の実装**: 認証なし（開発段階）

**今後の実装予定**:
- Basic認証
- GitHub OAuth
- 環境変数による保護

---

## 機能説明

### 1. CMS管理タブ

#### 概要
企業文章とニュースの作成・編集を行うSveltia CMSの統合インターフェース。

#### 機能
- ✅ 記事の作成・編集・削除
- ✅ ニュースの投稿・管理
- ✅ カテゴリー設定
- ✅ タグ管理
- ✅ 公開/非公開の切り替え
- ✅ Markdownエディター
- ✅ プレビュー機能

#### アクセス方法
1. ダッシュボードで「**CMS管理**」タブをクリック
2. または「**別タブでCMSを開く**」ボタンから専用画面へ

#### 使用例

**新規記事作成**:
```
1. CMS管理タブを開く
2. 「企業文章」または「ニュース」を選択
3. 「新しい記事」ボタンをクリック
4. フォームに入力
5. 「保存」をクリック
```

**記事編集**:
```
1. 記事一覧から編集したい記事を選択
2. 内容を編集
3. 「保存」をクリック
```

### 2. 画像管理タブ

#### 概要
Cloudinaryと連携した画像アップロード・管理機能。

#### 機能
- ✅ 画像のアップロード
- ✅ 画像ライブラリの閲覧
- ✅ URLコピー機能
- ✅ 画像のダウンロード
- ✅ 画像の削除
- ✅ 検索・フィルター

#### アップロード方法

**方法1: ドラッグ&ドロップ**
```
1. 画像管理タブを開く
2. ファイルをドラッグ&ドロップエリアにドロップ
3. 自動的にCloudinaryにアップロード
```

**方法2: ファイル選択**
```
1. 「ファイルを選択」ボタンをクリック
2. アップロードする画像を選択
3. 自動的にCloudinaryにアップロード
```

#### 画像の使用方法

**URLをコピー**:
```
1. 使用したい画像にカーソルを合わせる
2. 「URLをコピー」ボタンをクリック
3. 記事やHero設定にペースト
```

#### 対応形式
- JPG / JPEG
- PNG
- GIF
- SVG
- WebP

#### サイズ制限
- **最大ファイルサイズ**: 10MB
- **推奨サイズ**:
  - アイキャッチ画像: 1200 x 630px
  - 本文画像: 800 x 600px

### 3. Hero管理タブ

#### 概要
トップページのHeroセクションの内容を編集する機能。

#### 編集項目

| 項目 | 説明 | 例 |
|------|------|-----|
| 背景画像URL | Heroセクションの背景画像 | https://... |
| メインタイトル | 大きく表示されるタイトル | 品質を極め、文化をつなぐ |
| サブタイトル | タイトルの下に表示 | 日中コーヒービジネスの新基準 |
| 説明文 | 詳細説明（複数行可） | 北京で磨いた... |
| ボタン1 | テキストとリンク先 | 私たちについて → /about |
| ボタン2 | テキストとリンク先 | サービス詳細 → /coffee |

#### 編集手順

```
1. Hero管理タブを開く
2. 各項目を編集
3. 「プレビュー」ボタンで確認
4. 「変更を保存」をクリック
```

#### プレビュー機能

**使い方**:
```
1. 編集中に「プレビュー」ボタンをクリック
2. 実際のHeroセクションの表示を確認
3. 「編集」ボタンで編集モードに戻る
```

#### 保存と反映

- 変更は「**変更を保存**」ボタンで保存
- 保存後、即座にサイトに反映
- 「**サイトで確認**」ボタンで実際のページを確認可能

---

## 使用方法

### 基本ワークフロー

#### 記事を公開する

```
1. ダッシュボードにアクセス
   ↓
2. CMS管理タブを開く
   ↓
3. 新規記事を作成
   ↓
4. 内容を入力（タイトル、本文など）
   ↓
5. 画像管理タブで画像をアップロード
   ↓
6. 画像URLをコピーして記事に挿入
   ↓
7. プレビューで確認
   ↓
8. 「公開状態」をONにして保存
   ↓
9. サイトで表示を確認
```

#### Heroセクションを更新する

```
1. Hero管理タブを開く
   ↓
2. 各項目を編集
   ↓
3. 必要に応じて画像管理タブで新しい背景画像をアップロード
   ↓
4. プレビューで確認
   ↓
5. 変更を保存
   ↓
6. サイトで確認
```

### よくある操作

#### 画像付き記事を作成

```markdown
1. 画像管理タブで画像をアップロード
2. 画像URLをコピー
3. CMS管理タブで記事作成
4. アイキャッチ画像欄にURLをペースト
5. 本文中にも画像を挿入:
   ![説明](画像URL)
```

#### 外部リンクのニュースを投稿

```
1. CMS管理タブでニュースを選択
2. 「新しいニュース」をクリック
3. タイトルと説明を入力
4. 「外部リンク」欄に完全なURLを入力
5. 保存して公開
```

---

## セキュリティ

### 現在の実装

**開発段階**のため、現在は認証なしでアクセス可能です。

### 今後の実装予定

#### Basic認証
```typescript
// 環境変数で保護
ADMIN_USERNAME=admin
ADMIN_PASSWORD=secure_password
```

#### アクセス制限
- IPアドレスによる制限
- VPN経由のみアクセス可能

#### GitHub OAuth
- GitHubアカウントで認証
- リポジトリへの書き込み権限が必要

### セキュリティベストプラクティス

1. **環境変数の管理**
   - `.env.local` はGitにコミットしない
   - 本番環境の環境変数は安全に管理

2. **アクセス制限**
   - 管理画面へのアクセスは必要最小限に
   - 定期的にアクセスログを確認

3. **定期的なバックアップ**
   - Gitで自動的にバージョン管理
   - 重要な変更前にバックアップ

---

## トラブルシューティング

### よくある問題

#### 1. CMSが表示されない

**症状**: CMS管理タブが空白または読み込めない

**解決方法**:
```
1. ページを再読み込み (Cmd/Ctrl + R)
2. ブラウザのキャッシュをクリア
3. 別のブラウザで試す
4. 開発サーバーが起動しているか確認
```

#### 2. 画像がアップロードできない

**症状**: 画像アップロードボタンが反応しない

**解決方法**:
```
1. ファイルサイズを確認（10MB以下）
2. 対応形式か確認（JPG, PNG, GIF等）
3. Cloudinary設定を確認
4. 環境変数が正しく設定されているか確認
```

#### 3. Hero設定が保存されない

**症状**: 「変更を保存」後も反映されない

**解決方法**:
```
1. 必須項目がすべて入力されているか確認
2. ブラウザのコンソールでエラーを確認
3. サーバーログを確認
4. 数分待ってから再度確認
```

#### 4. プレビューと実際のサイトで表示が異なる

**原因**: キャッシュの問題

**解決方法**:
```
1. ブラウザのキャッシュをクリア
2. シークレットモード/プライベートブラウジングで確認
3. 数分待ってから確認（ビルド時間）
```

### エラーメッセージ

| エラー | 原因 | 対処法 |
|--------|------|--------|
| "CMS loading failed" | CMS読み込みエラー | ページ再読み込み |
| "Upload failed" | 画像アップロード失敗 | ファイルサイズ確認 |
| "Save error" | 保存失敗 | 必須項目確認 |
| "Network error" | 通信エラー | インターネット接続確認 |

### サポート連絡先

問題が解決しない場合：

**開発チーム**
- Email: dev@no-trace.jp
- Slack: #admin-support
- GitHub Issues: プロジェクトリポジトリ

---

## ベストプラクティス

### 記事管理

1. **定期的な更新**
   - 週1-2回のニュース更新
   - 月2-4回の企業文章公開

2. **カテゴリーの統一**
   - 適切なカテゴリーを選択
   - 新しいカテゴリーは慎重に追加

3. **画像の最適化**
   - アップロード前にリサイズ
   - 適切な圧縮率を設定

### Hero管理

1. **変更前の確認**
   - プレビュー機能を活用
   - 別タブで実際のサイトを確認

2. **テキストの長さ**
   - タイトル: 30文字以内
   - サブタイトル: 40文字以内
   - 説明文: 100文字以内

3. **背景画像**
   - 高解像度（1920px以上）
   - 明るすぎない画像を選択
   - テキストが読みやすいコントラスト

---

## 付録

### キーボードショートカット

| 操作 | ショートカット |
|------|---------------|
| ページ再読み込み | Cmd/Ctrl + R |
| 保存 | Cmd/Ctrl + S (CMS内) |
| 検索 | Cmd/Ctrl + F |

### よく使うコマンド

```bash
# 開発サーバー起動
npm run dev

# ビルド
npm run build

# 管理画面アクセス
http://localhost:3000/admin
```

### 外部リンク

- [Sveltia CMS ドキュメント](https://github.com/sveltia/sveltia-cms)
- [Cloudinary ドキュメント](https://cloudinary.com/documentation)
- [Markdown ガイド](https://www.markdownguide.org/)

---

## アップデート履歴

### v0.4.0 (2025-01-15)
- ✅ 統合管理ダッシュボード実装
- ✅ CMS管理タブ追加
- ✅ 画像管理タブ追加
- ✅ Hero管理タブ追加
- ✅ タブベースUI実装

---

**このガイドは継続的に更新されます**

**最終更新**: 2025-01-15
**バージョン**: v0.4.0
**作成者**: NO TRACE EXPLORER 開発チーム
